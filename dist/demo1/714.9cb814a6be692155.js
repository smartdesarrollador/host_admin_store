"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[714],{9714:(pe,Z,d)=>{d.r(Z),d.d(Z,{CuponesModule:()=>de});var p=d(6814),C=d(7304),e=d(5879);let T=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=e.Xpm({type:o,selectors:[["app-cupones"]],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},dependencies:[C.lC]})}return o})();var l=d(9862),v=d(5619),g=d(4716),m=d(6988),A=d(3595);let f=(()=>{class o{http;authservice;isLoading$;isLoadingSubject;constructor(t,i){this.http=t,this.authservice=i,this.isLoadingSubject=new v.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}listCupones(t=1,i){this.isLoadingSubject.next(!0);let n=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(m.$g+"/admin/cupones?page="+t+"&search="+i,{headers:n}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}configCupones(){this.isLoadingSubject.next(!0);let t=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(m.$g+"/admin/cupones/config",{headers:t}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}createCupones(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(m.$g+"/admin/cupones",t,{headers:i}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}showCupone(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(m.$g+"/admin/cupones/"+t,{headers:i}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}updateCupones(t,i){this.isLoadingSubject.next(!0);let n=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.put(m.$g+"/admin/cupones/"+t,i,{headers:n}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}deleteCupone(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:"Bearer "+this.authservice.token});return this.http.delete(m.$g+"/admin/cupones/"+t,{headers:i}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(i){return new(i||o)(e.LFG(l.eN),e.LFG(A.e8))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var b=d(2425),c=d(6223);function x(o,s){1&o&&e._UZ(0,"span",30)}function y(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"label",5),e._uU(2,"N\xb0 de usos: (*)"),e.qZA(),e.TgZ(3,"input",31),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.num_use=n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.num_use)}}function E(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",39),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.title)}}function k(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",26)(2,"div",33)(3,"label",5),e._uU(4,"Productos:(*)"),e.qZA(),e.TgZ(5,"select",34),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.product_id=n)}),e.TgZ(6,"option",35),e._uU(7,"Selec."),e.qZA(),e.YNc(8,E,3,2,"ng-container",36),e.qZA()(),e.TgZ(9,"div",37)(10,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addProduct())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.product_id),e.xp6(3),e.Q6J("ngForOf",t.products)}}function q(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",39),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function N(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",8)(2,"div",33)(3,"label",5),e._uU(4,"Departamento:(Primer Nivel *)"),e.qZA(),e.TgZ(5,"select",40),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.categorie_id=n)}),e.TgZ(6,"option",35),e._uU(7,"Selec."),e.qZA(),e.YNc(8,q,3,2,"ng-container",36),e.qZA()(),e.TgZ(9,"div",37)(10,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addCategorie())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.categorie_id),e.xp6(3),e.Q6J("ngForOf",t.categories_first)}}function U(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",39),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function J(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",8)(2,"div",33)(3,"label",5),e._uU(4,"Marcas:(*)"),e.qZA(),e.TgZ(5,"select",41),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.brand_id=n)}),e.TgZ(6,"option",35),e._uU(7,"Selec."),e.qZA(),e.YNc(8,U,3,2,"ng-container",36),e.qZA()(),e.TgZ(9,"div",37)(10,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addBrand())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.brand_id),e.xp6(3),e.Q6J("ngForOf",t.brands)}}function w(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",46),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",47),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeProduct(a))}),e._uU(7,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.title)}}function I(o,s){if(1&o&&(e.TgZ(0,"div",32)(1,"div",42)(2,"div",43)(3,"table",44)(4,"thead")(5,"tr",45)(6,"th"),e._uU(7,"IMAGEN"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"TITULO"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ACCI\xd3N"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,w,8,2,"tr",36),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.products_add)}}function S(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",46),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",47),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeCategorie(a))}),e._uU(7,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.name)}}function M(o,s){if(1&o&&(e.TgZ(0,"div",32)(1,"div",42)(2,"div",43)(3,"table",44)(4,"thead")(5,"tr",45)(6,"th"),e._uU(7,"IMAGEN"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"NOMBRE DE LA CATEGORIA"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ACCI\xd3N"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,S,8,2,"tr",36),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.categories_add)}}function O(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"button",47),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeBrand(a))}),e._uU(5,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name)}}function L(o,s){if(1&o&&(e.TgZ(0,"div",32)(1,"div",42)(2,"div",43)(3,"table",44)(4,"thead")(5,"tr",45)(6,"th"),e._uU(7,"NOMBRE DE LA MARCA"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"ACCI\xd3N"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,O,6,1,"tr",36),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.brands_add)}}const u=function(o){return{active:o}};let Q=(()=>{class o{cuponesService;toastr;code;type_discount=1;discount=0;type_count=1;num_use=0;type_cupone=1;product_id;categorie_id;brand_id;isLoading$;categories_first=[];products=[];brands=[];categories_add=[];products_add=[];brands_add=[];constructor(t,i){this.cuponesService=t,this.toastr=i}ngOnInit(){this.isLoading$=this.cuponesService.isLoading$,this.cuponesService.configCupones().subscribe(t=>{this.categories_first=t.categories,this.products=t.products,this.brands=t.brands})}changeTypeDiscount(t){this.type_discount=t}changeTypeCount(t){this.type_count=t}changeTypeCupone(t){this.type_cupone=t,this.products_add=[],this.categories_add=[],this.brands_add=[],this.product_id=null,this.categorie_id=null,this.brand_id=null}save(){this.code&&this.discount?2!=this.type_count||0!=this.num_use?1!=this.type_cupone||0!=this.products_add.length?2!=this.type_cupone||0!=this.categories_add.length?3!=this.type_cupone||0!=this.brands_add.length?this.cuponesService.createCupones({type_discount:this.type_discount,type_count:this.type_count,type_cupone:this.type_cupone,num_use:this.num_use,discount:this.discount,code:this.code,product_selected:this.products_add,categorie_selected:this.categories_add,brand_selected:this.brands_add}).subscribe(i=>{console.log(i),403==i.message?this.toastr.error("Validaci\xf3n",i.message_text):(this.toastr.success("Exito","EL CUPON SE REGISTRO CORRECTAMENTE"),this.type_discount=1,this.type_count=1,this.type_cupone=1,this.num_use=0,this.discount=0,this.code=null,this.products_add=[],this.categories_add=[],this.brands_add=[],this.product_id=null,this.categorie_id=null,this.brand_id=null)}):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIAS MARCAS"):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIAS CATEGORIAS"):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIOS PRODUCTOS"):this.toastr.error("Validacion","ES NECESARIO PONERLE UNA CANTIDAD DE USOS AL CUPON"):this.toastr.error("Validacion","Necesitas llenar todos los campos")}addProduct(){if(!this.product_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar un producto");if(-1!=this.products_add.findIndex(n=>n.id==this.product_id))return void this.toastr.error("Validaci\xf3n","EL PRODUCTO YA EXISTE EN LA LISTA");let i=this.products.find(n=>n.id==this.product_id);i&&this.products_add.push(i)}addCategorie(){if(!this.categorie_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar una categoria");if(-1!=this.categories_add.findIndex(n=>n.id==this.categorie_id))return void this.toastr.error("Validaci\xf3n","LA CATEGORIA YA EXISTE EN LA LISTA");let i=this.categories_first.find(n=>n.id==this.categorie_id);i&&this.categories_add.push(i)}addBrand(){if(!this.brand_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar una marca");if(-1!=this.brands_add.findIndex(n=>n.id==this.brand_id))return void this.toastr.error("Validaci\xf3n","LA MARCA YA EXISTE EN LA LISTA");let i=this.brands.find(n=>n.id==this.brand_id);i&&this.brands_add.push(i)}removeProduct(t){let i=this.products_add.findIndex(n=>n.id==t.id);-1!=i&&this.products_add.splice(i,1)}removeCategorie(t){let i=this.categories_add.findIndex(n=>n.id==t.id);-1!=i&&this.categories_add.splice(i,1)}removeBrand(t){let i=this.brands_add.findIndex(n=>n.id==t.id);-1!=i&&this.brands_add.splice(i,1)}static \u0275fac=function(i){return new(i||o)(e.Y36(f),e.Y36(b._W))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-create-cupone"]],decls:89,vars:33,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-5","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","code","placeholder","Por ejemplo:   PROMOCIONES2024",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-4","fv-row","fv-plugins-icon-container"],[1,"row"],[1,"col-6"],["data-kt-button","true",1,"btn","btn-outline","btn-outline-dashed","btn-outline-default","d-flex","text-start","p-6",3,"ngClass"],[1,"form-check","form-check-custom","form-check-solid","form-check-sm","align-items-start","mt-1"],["type","radio","name","type_discount","value","1","checked","checked",1,"form-check-input",3,"click"],[1,"ms-5"],[1,"fs-6","fw-bolder","mb-1","d-block"],["type","radio","name","type_discount","value","2",1,"form-check-input",3,"click"],[1,"col-lg-3","fv-row","fv-plugins-icon-container"],["type","number","name","discount","placeholder","Por ejemplo:   50%",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","radio","name","type_count","value","1","checked","checked",1,"form-check-input",3,"click"],["type","radio","name","type_count","value","2",1,"form-check-input",3,"click"],["class","col-lg-3 fv-row fv-plugins-icon-container",4,"ngIf"],[1,"col-4"],[1,"col-12","my-2"],["type","radio","name","type_cupone","value","1","checked","checked",1,"form-check-input",3,"click"],["type","radio","name","type_cupone","value","2",1,"form-check-input",3,"click"],["type","radio","name","type_cupone","value","3",1,"form-check-input",3,"click"],[1,"row","align-items-start"],["class","col-12",4,"ngIf"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["type","number","name","num_use","placeholder","Por ejemplo:   20",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"col-10"],["name","product_id","placeholder","Selec. Producto",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"col-2"],[1,"btn","btn-sm","btn-success",3,"click"],[3,"value"],["name","categorie_id","placeholder","Selec. Departamento",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["name","brand_id","placeholder","Selec. Marcas",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive","w-100"],["id","kt_advance_table_widget_1",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-left"],["width","60","alt","",3,"src"],[1,"ml-5","btn","btn-sm","btn-danger",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.YNc(1,x,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Codigo del cupon: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(r){return n.code=r}),e.qZA()(),e.TgZ(9,"div",7)(10,"label",5),e._uU(11,"Gesti\xf3n de descuento: (*)"),e.qZA(),e.TgZ(12,"div",8)(13,"div",9)(14,"label",10)(15,"span",11)(16,"input",12),e.NdJ("click",function(){return n.changeTypeDiscount(1)}),e.qZA()(),e.TgZ(17,"span",13)(18,"span",14),e._uU(19,"Porcentaje"),e.qZA()()()(),e.TgZ(20,"div",9)(21,"label",10)(22,"span",11)(23,"input",15),e.NdJ("click",function(){return n.changeTypeDiscount(2)}),e.qZA()(),e.TgZ(24,"span",13)(25,"span",14),e._uU(26,"Monto fijo"),e.qZA()()()()()(),e.TgZ(27,"div",16)(28,"label",5),e._uU(29,"Descuento: (*)"),e.qZA(),e.TgZ(30,"input",17),e.NdJ("ngModelChange",function(r){return n.discount=r}),e.qZA()()(),e.TgZ(31,"div",3)(32,"div",7)(33,"label",5),e._uU(34,"Gesti\xf3n de uso: (*)"),e.qZA(),e.TgZ(35,"div",8)(36,"div",9)(37,"label",10)(38,"span",11)(39,"input",18),e.NdJ("click",function(){return n.changeTypeCount(1)}),e.qZA()(),e.TgZ(40,"span",13)(41,"span",14),e._uU(42,"Ilimitado"),e.qZA()()()(),e.TgZ(43,"div",9)(44,"label",10)(45,"span",11)(46,"input",19),e.NdJ("click",function(){return n.changeTypeCount(2)}),e.qZA()(),e.TgZ(47,"span",13)(48,"span",14),e._uU(49,"Limitado"),e.qZA()()()()()(),e.YNc(50,y,4,1,"div",20),e.qZA(),e.TgZ(51,"div",3)(52,"div",21)(53,"div",8)(54,"div",22)(55,"label",10)(56,"span",11)(57,"input",23),e.NdJ("click",function(){return n.changeTypeCupone(1)}),e.qZA()(),e.TgZ(58,"span",13)(59,"span",14),e._uU(60,"Productos"),e.qZA()()()(),e.TgZ(61,"div",22)(62,"label",10)(63,"span",11)(64,"input",24),e.NdJ("click",function(){return n.changeTypeCupone(2)}),e.qZA()(),e.TgZ(65,"span",13)(66,"span",14),e._uU(67,"Categorias"),e.qZA()()()(),e.TgZ(68,"div",22)(69,"label",10)(70,"span",11)(71,"input",25),e.NdJ("click",function(){return n.changeTypeCupone(3)}),e.qZA()(),e.TgZ(72,"span",13)(73,"span",14),e._uU(74,"Marcas"),e.qZA()()()()()(),e.TgZ(75,"div",21)(76,"div",26),e.YNc(77,k,12,2,"div",27),e.YNc(78,N,12,2,"div",27),e.YNc(79,J,12,2,"div",27),e.qZA()(),e.TgZ(80,"div",21)(81,"div",8),e.YNc(82,I,14,1,"div",27),e.YNc(83,M,14,1,"div",27),e.YNc(84,L,12,1,"div",27),e.qZA()()(),e.TgZ(85,"div",3)(86,"div",28)(87,"button",29),e.NdJ("click",function(){return n.save()}),e._uU(88,"Guardar"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,17,n.isLoading$)),e.xp6(7),e.Q6J("ngModel",n.code),e.xp6(6),e.Q6J("ngClass",e.VKq(19,u,1==n.type_discount)),e.xp6(7),e.Q6J("ngClass",e.VKq(21,u,2==n.type_discount)),e.xp6(9),e.Q6J("ngModel",n.discount),e.xp6(7),e.Q6J("ngClass",e.VKq(23,u,1==n.type_count)),e.xp6(7),e.Q6J("ngClass",e.VKq(25,u,2==n.type_count)),e.xp6(6),e.Q6J("ngIf",2==n.type_count),e.xp6(5),e.Q6J("ngClass",e.VKq(27,u,1==n.type_cupone)),e.xp6(7),e.Q6J("ngClass",e.VKq(29,u,2==n.type_cupone)),e.xp6(7),e.Q6J("ngClass",e.VKq(31,u,3==n.type_cupone)),e.xp6(8),e.Q6J("ngIf",1==n.type_cupone),e.xp6(1),e.Q6J("ngIf",2==n.type_cupone),e.xp6(1),e.Q6J("ngIf",3==n.type_cupone),e.xp6(3),e.Q6J("ngIf",1==n.type_cupone),e.xp6(1),e.Q6J("ngIf",2==n.type_cupone),e.xp6(1),e.Q6J("ngIf",3==n.type_cupone))},dependencies:[p.mk,p.sg,p.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On,p.Ov]})}return o})();var h=d(1274);function D(o,s){1&o&&e._UZ(0,"span",15)}let R=(()=>{class o{cuponeService;toastr;modal;cupone;CuponD=new e.vpe;isLoading;constructor(t,i,n){this.cuponeService=t,this.toastr=i,this.modal=n}ngOnInit(){this.isLoading=this.cuponeService.isLoading$}delete(){this.cuponeService.deleteCupone(this.cupone.id).subscribe(t=>{403==t.message?this.toastr.error("Validaci\xf3n",t.message_text):(this.CuponD.emit({message:200}),this.modal.close())})}static \u0275fac=function(i){return new(i||o)(e.Y36(f),e.Y36(b._W),e.Y36(h.Kz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-delete-cupone"]],inputs:{cupone:"cupone"},outputs:{CuponD:"CuponD"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12," \xbfESTAS SEGURO DE ELIMINAR ESTE CUPON? "),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return n.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return n.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,D,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&i&&(e.xp6(3),e.hij("Delete Cupon: #",n.cupone.code,""),e.xp6(16),e.Q6J("ngIf",e.lcZ(20,2,n.isLoading)))},dependencies:[p.O5,c._Y,c.JL,c.F,p.Ov]})}return o})();function F(o,s){1&o&&e._UZ(0,"span",57)}function P(o,s){1&o&&(e.TgZ(0,"span",69),e._uU(1,"Activo"),e.qZA())}function Y(o,s){1&o&&(e.TgZ(0,"span",70),e._uU(1,"Inactivo"),e.qZA())}function V(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",58)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e.YNc(5,P,2,0,"span",59),e.YNc(6,Y,2,0,"span",60),e.qZA(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td",61)(14,"a",62)(15,"i",63),e._UZ(16,"span",6)(17,"span",7),e.qZA()(),e.TgZ(18,"a",64),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteCupon(a))}),e.TgZ(19,"i",65),e._UZ(20,"span",6)(21,"span",7)(22,"span",66)(23,"span",67)(24,"span",68),e.qZA()()()(),e.BQk()}if(2&o){const t=s.$implicit,i=e.oxw();e.xp6(3),e.hij(" ",t.code," "),e.xp6(2),e.Q6J("ngIf",1==t.state),e.xp6(1),e.Q6J("ngIf",2==t.state),e.xp6(3),e.hij(" ",i.getNameTypeCupon(t.type_cupone)," "),e.xp6(3),e.AsE(" ",t.discount," ",1==t.type_discount?"%":"PEN"," "),e.xp6(2),e.Q6J("routerLink","/cupones/list/edit/"+t.id)}}function $(o,s){1&o&&e._UZ(0,"span",34)}function K(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"label",5),e._uU(2,"N\xb0 de usos: (*)"),e.qZA(),e.TgZ(3,"input",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.num_use=n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.num_use)}}function X(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",43),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.title)}}function j(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",30)(2,"div",37)(3,"label",5),e._uU(4,"Productos:(*)"),e.qZA(),e.TgZ(5,"select",38),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.product_id=n)}),e.TgZ(6,"option",39),e._uU(7,"Selec."),e.qZA(),e.YNc(8,X,3,2,"ng-container",40),e.qZA()(),e.TgZ(9,"div",41)(10,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addProduct())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.product_id),e.xp6(3),e.Q6J("ngForOf",t.products)}}function B(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",43),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",8)(2,"div",37)(3,"label",5),e._uU(4,"Departamento:(Primer Nivel *)"),e.qZA(),e.TgZ(5,"select",44),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.categorie_id=n)}),e.TgZ(6,"option",39),e._uU(7,"Selec."),e.qZA(),e.YNc(8,B,3,2,"ng-container",40),e.qZA()(),e.TgZ(9,"div",41)(10,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addCategorie())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.categorie_id),e.xp6(3),e.Q6J("ngForOf",t.categories_first)}}function z(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",43),e._uU(2),e.qZA(),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",8)(2,"div",37)(3,"label",5),e._uU(4,"Marcas:(*)"),e.qZA(),e.TgZ(5,"select",45),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.brand_id=n)}),e.TgZ(6,"option",39),e._uU(7,"Selec."),e.qZA(),e.YNc(8,z,3,2,"ng-container",40),e.qZA()(),e.TgZ(9,"div",41)(10,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addBrand())}),e._uU(11,"+"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.brand_id),e.xp6(3),e.Q6J("ngForOf",t.brands)}}function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",50),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",51),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeProduct(a))}),e._uU(7,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.title)}}function te(o,s){if(1&o&&(e.TgZ(0,"div",36)(1,"div",46)(2,"div",47)(3,"table",48)(4,"thead")(5,"tr",49)(6,"th"),e._uU(7,"IMAGEN"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"TITULO"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ACCI\xd3N"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,ee,8,2,"tr",40),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.products_add)}}function ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",50),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",51),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeCategorie(a))}),e._uU(7,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.name)}}function oe(o,s){if(1&o&&(e.TgZ(0,"div",36)(1,"div",46)(2,"div",47)(3,"table",48)(4,"thead")(5,"tr",49)(6,"th"),e._uU(7,"IMAGEN"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"NOMBRE DE LA CATEGORIA"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ACCI\xd3N"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,ne,8,2,"tr",40),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.categories_add)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"button",51),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.removeBrand(a))}),e._uU(5,"X"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name)}}function ae(o,s){if(1&o&&(e.TgZ(0,"div",36)(1,"div",46)(2,"div",47)(3,"table",48)(4,"thead")(5,"tr",49)(6,"th"),e._uU(7,"NOMBRE DE LA MARCA"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"ACCI\xd3N"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,ie,6,1,"tr",40),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.brands_add)}}const _=function(o){return{active:o}},se=[{path:"",component:T,children:[{path:"register",component:Q},{path:"list",component:(()=>{class o{cuponeService;modalService;cupones=[];search="";totalPages=0;currentPage=1;isLoading$;constructor(t,i){this.cuponeService=t,this.modalService=i}ngOnInit(){this.listCupones(),this.isLoading$=this.cuponeService.isLoading$}listCupones(t=1){this.cuponeService.listCupones(t,this.search).subscribe(i=>{console.log(i),this.cupones=i.cupones.data,this.totalPages=i.total,this.currentPage=t})}searchTo(){this.listCupones()}loadPage(t){console.log(t),this.listCupones(t)}getNameTypeCupon(t){let i="";switch(t){case 1:i="Productos";break;case 2:i="Categorias";break;case 3:i="Marcas"}return i}deleteCupon(t){const i=this.modalService.open(R,{centered:!0,size:"md"});i.componentInstance.cupone=t,i.componentInstance.CuponD.subscribe(n=>{let a=this.cupones.findIndex(r=>r.id==t.id);-1!=a&&this.cupones.splice(a,1)})}static \u0275fac=function(i){return new(i||o)(e.Y36(f),e.Y36(h.FF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-list-cupone"]],decls:85,vars:10,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","data-kt-user-table-filter","search","placeholder","Search Cupon",1,"form-control","form-control-solid","w-250px","ps-13",3,"ngModel","keyup.enter","ngModelChange"],[1,"card-toolbar"],["data-kt-user-table-toolbar","base",1,"d-flex","justify-content-end"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","w-300px","w-md-325px"],[1,"px-7","py-5"],[1,"fs-5","text-gray-900","fw-bold"],[1,"separator","border-gray-200"],["data-kt-user-table-filter","form",1,"px-7","py-5"],[1,"mb-10"],[1,"form-label","fs-6","fw-semibold"],["data-kt-select2","true","data-placeholder","Select option","data-allow-clear","true","data-kt-user-table-filter","role","data-hide-search","true","data-select2-id","select2-data-9-luti","tabindex","-1","aria-hidden","true","data-kt-initialized","1",1,"form-select","form-select-solid","fw-bold","select2-hidden-accessible"],["data-select2-id","select2-data-11-bbrq"],["value","Administrator"],["value","Analyst"],["value","Developer"],["value","Support"],["value","Trial"],["dir","ltr","data-select2-id","select2-data-10-4cpl",1,"select2","select2-container","select2-container--bootstrap5",2,"width","100%"],[1,"selection"],["role","combobox","aria-haspopup","true","aria-expanded","false","tabindex","0","aria-disabled","false","aria-labelledby","select2-n6kk-container","aria-controls","select2-n6kk-container",1,"select2-selection","select2-selection--single","form-select","form-select-solid","fw-bold"],["id","select2-n6kk-container","role","textbox","aria-readonly","true","title","Select option",1,"select2-selection__rendered"],[1,"select2-selection__placeholder"],["role","presentation",1,"select2-selection__arrow"],["role","presentation"],["aria-hidden","true",1,"dropdown-wrapper"],["data-kt-select2","true","data-placeholder","Select option","data-allow-clear","true","data-kt-user-table-filter","two-step","data-hide-search","true","data-select2-id","select2-data-12-cr6q","tabindex","-1","aria-hidden","true","data-kt-initialized","1",1,"form-select","form-select-solid","fw-bold","select2-hidden-accessible"],["data-select2-id","select2-data-14-2pp3"],["value","Enabled"],["dir","ltr","data-select2-id","select2-data-13-3y7a",1,"select2","select2-container","select2-container--bootstrap5",2,"width","100%"],["role","combobox","aria-haspopup","true","aria-expanded","false","tabindex","0","aria-disabled","false","aria-labelledby","select2-oer2-container","aria-controls","select2-oer2-container",1,"select2-selection","select2-selection--single","form-select","form-select-solid","fw-bold"],["id","select2-oer2-container","role","textbox","aria-readonly","true","title","Select option",1,"select2-selection__rendered"],[1,"d-flex","justify-content-end"],["type","reset","data-kt-menu-dismiss","true","data-kt-user-table-filter","reset",1,"btn","btn-light","btn-active-light-primary","fw-semibold","me-2","px-6"],["type","submit","data-kt-menu-dismiss","true","data-kt-user-table-filter","filter",1,"btn","btn-primary","fw-semibold","px-6"],["routerLink","/cupones/register",1,"btn","btn-primary"],[1,"ki-duotone","ki-plus","fs-2"],[1,"card-body","py-4"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive"],["id","kt_table_users",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","275.844px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Last login: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Two-step : activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Joined Date: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","214.609px"],["rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-100px","sorting_disabled",2,"width","129.75px"],[1,"text-gray-600","fw-semibold"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"odd"],["class","badge badge-light-primary fs-7 fw-bold",4,"ngIf"],["class","badge badge-light-danger fs-7 fw-bold",4,"ngIf"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"routerLink"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"badge","badge-light-primary","fs-7","fw-bold"],[1,"badge","badge-light-danger","fs-7","fw-bold"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.YNc(1,F,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"i",5),e._UZ(7,"span",6)(8,"span",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("keyup.enter",function(){return n.searchTo()})("ngModelChange",function(r){return n.search=r}),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),e._uU(15,"Filter Options"),e.qZA()(),e._UZ(16,"div",14),e.TgZ(17,"div",15)(18,"div",16)(19,"label",17),e._uU(20,"Role:"),e.qZA(),e.TgZ(21,"select",18),e._UZ(22,"option",19),e.TgZ(23,"option",20),e._uU(24,"Administrator"),e.qZA(),e.TgZ(25,"option",21),e._uU(26,"Analyst"),e.qZA(),e.TgZ(27,"option",22),e._uU(28,"Developer"),e.qZA(),e.TgZ(29,"option",23),e._uU(30,"Support"),e.qZA(),e.TgZ(31,"option",24),e._uU(32,"Trial"),e.qZA()(),e.TgZ(33,"span",25)(34,"span",26)(35,"span",27)(36,"span",28)(37,"span",29),e._uU(38,"Select option"),e.qZA()(),e.TgZ(39,"span",30),e._UZ(40,"b",31),e.qZA()()(),e._UZ(41,"span",32),e.qZA()(),e.TgZ(42,"div",16)(43,"label",17),e._uU(44,"Two Step Verification:"),e.qZA(),e.TgZ(45,"select",33),e._UZ(46,"option",34),e.TgZ(47,"option",35),e._uU(48,"Enabled"),e.qZA()(),e.TgZ(49,"span",36)(50,"span",26)(51,"span",37)(52,"span",38)(53,"span",29),e._uU(54,"Select option"),e.qZA()(),e.TgZ(55,"span",30),e._UZ(56,"b",31),e.qZA()()(),e._UZ(57,"span",32),e.qZA()(),e.TgZ(58,"div",39)(59,"button",40),e._uU(60,"Reset"),e.qZA(),e.TgZ(61,"button",41),e._uU(62,"Apply"),e.qZA()()()(),e.TgZ(63,"a",42),e._UZ(64,"i",43),e._uU(65," Add Cupon "),e.qZA()()()(),e.TgZ(66,"div",44)(67,"div",45)(68,"div",46)(69,"table",47)(70,"thead")(71,"tr",48)(72,"th",49),e._uU(73," Code "),e.qZA(),e.TgZ(74,"th",50),e._uU(75," State "),e.qZA(),e.TgZ(76,"th",51),e._uU(77," Tipo de Cupon "),e.qZA(),e.TgZ(78,"th",52),e._uU(79," Descuento "),e.qZA(),e.TgZ(80,"th",53),e._uU(81,"Actions"),e.qZA()()(),e.TgZ(82,"tbody",54),e.YNc(83,V,25,7,"ng-container",55),e.qZA()(),e.TgZ(84,"ngb-pagination",56),e.NdJ("pageChange",function(r){return n.currentPage=r})("pageChange",function(r){return n.loadPage(r)}),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,8,n.isLoading$)),e.xp6(8),e.Q6J("ngModel",n.search),e.xp6(74),e.Q6J("ngForOf",n.cupones),e.xp6(1),e.Q6J("collectionSize",n.totalPages)("page",n.currentPage)("pageSize",25)("rotate",!0)("boundaryLinks",!0))},dependencies:[p.sg,p.O5,C.rH,c.YN,c.Kr,c.Fj,c.JJ,c.On,h.N9,p.Ov]})}return o})()},{path:"list/edit/:id",component:(()=>{class o{cuponesService;toastr;activedRoute;code;type_discount=1;discount=0;type_count=1;num_use=0;type_cupone=1;product_id;categorie_id;brand_id;isLoading$;state=1;categories_first=[];products=[];brands=[];categories_add=[];products_add=[];brands_add=[];CUPONE_ID;CUPONE_SELECTED;constructor(t,i,n){this.cuponesService=t,this.toastr=i,this.activedRoute=n}ngOnInit(){this.isLoading$=this.cuponesService.isLoading$,this.cuponesService.configCupones().subscribe(t=>{this.categories_first=t.categories,this.products=t.products,this.brands=t.brands}),this.activedRoute.params.subscribe(t=>{this.CUPONE_ID=t.id}),this.cuponesService.showCupone(this.CUPONE_ID).subscribe(t=>{console.log(t),this.CUPONE_SELECTED=t.cupone,this.code=t.cupone.code,this.type_discount=t.cupone.type_discount,this.discount=t.cupone.discount,this.type_count=t.cupone.type_count,this.num_use=t.cupone.num_use,this.type_cupone=t.cupone.type_cupone,this.state=t.cupone.state,this.categories_add=t.cupone.categories,this.products_add=t.cupone.products,this.brands_add=t.cupone.brands})}changeTypeDiscount(t){this.type_discount=t}changeTypeCount(t){this.type_count=t}changeTypeCupone(t){this.type_cupone=t,this.products_add=[],this.categories_add=[],this.brands_add=[],this.product_id=null,this.categorie_id=null,this.brand_id=null}save(){this.code&&this.discount?2!=this.type_count||0!=this.num_use?1!=this.type_cupone||0!=this.products_add.length?2!=this.type_cupone||0!=this.categories_add.length?3!=this.type_cupone||0!=this.brands_add.length?this.cuponesService.updateCupones(this.CUPONE_ID,{type_discount:this.type_discount,type_count:this.type_count,type_cupone:this.type_cupone,num_use:this.num_use,discount:this.discount,code:this.code,product_selected:this.products_add,categorie_selected:this.categories_add,brand_selected:this.brands_add,state:this.state}).subscribe(i=>{console.log(i),403==i.message?this.toastr.error("Validaci\xf3n",i.message_text):this.toastr.success("Exito","EL CUPON SE EDITO CORRECTAMENTE")}):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIAS MARCAS"):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIAS CATEGORIAS"):this.toastr.error("Validacion","ES NECESARIO SELECCIONAR UNO O VARIOS PRODUCTOS"):this.toastr.error("Validacion","ES NECESARIO PONERLE UNA CANTIDAD DE USOS AL CUPON"):this.toastr.error("Validacion","Necesitas llenar todos los campos")}addProduct(){if(!this.product_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar un producto");if(-1!=this.products_add.findIndex(n=>n.id==this.product_id))return void this.toastr.error("Validaci\xf3n","EL PRODUCTO YA EXISTE EN LA LISTA");let i=this.products.find(n=>n.id==this.product_id);i&&this.products_add.push(i)}addCategorie(){if(!this.categorie_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar una categoria");if(-1!=this.categories_add.findIndex(n=>n.id==this.categorie_id))return void this.toastr.error("Validaci\xf3n","LA CATEGORIA YA EXISTE EN LA LISTA");let i=this.categories_first.find(n=>n.id==this.categorie_id);i&&this.categories_add.push(i)}addBrand(){if(!this.brand_id)return void this.toastr.error("Validaci\xf3n","Es necesario seleccionar una marca");if(-1!=this.brands_add.findIndex(n=>n.id==this.brand_id))return void this.toastr.error("Validaci\xf3n","LA MARCA YA EXISTE EN LA LISTA");let i=this.brands.find(n=>n.id==this.brand_id);i&&this.brands_add.push(i)}removeProduct(t){let i=this.products_add.findIndex(n=>n.id==t.id);-1!=i&&this.products_add.splice(i,1)}removeCategorie(t){let i=this.categories_add.findIndex(n=>n.id==t.id);-1!=i&&this.categories_add.splice(i,1)}removeBrand(t){let i=this.brands_add.findIndex(n=>n.id==t.id);-1!=i&&this.brands_add.splice(i,1)}static \u0275fac=function(i){return new(i||o)(e.Y36(f),e.Y36(b._W),e.Y36(C.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-edit-cupone"]],decls:97,vars:41,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-5","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","code","placeholder","Por ejemplo:   PROMOCIONES2024",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-4","fv-row","fv-plugins-icon-container"],[1,"row"],[1,"col-6"],["data-kt-button","true",1,"btn","btn-outline","btn-outline-dashed","btn-outline-default","d-flex","text-start","p-6",3,"ngClass"],[1,"form-check","form-check-custom","form-check-solid","form-check-sm","align-items-start","mt-1"],["type","radio","name","type_discount","value","1",1,"form-check-input",3,"checked","click"],[1,"ms-5"],[1,"fs-6","fw-bolder","mb-1","d-block"],["type","radio","name","type_discount","value","2",1,"form-check-input",3,"checked","click"],[1,"col-lg-3","fv-row","fv-plugins-icon-container"],["type","number","name","discount","placeholder","Por ejemplo:   50%",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-4"],["name","state","placeholder","Selec. Estado",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["type","radio","name","type_count","value","1",1,"form-check-input",3,"checked","click"],["type","radio","name","type_count","value","2",1,"form-check-input",3,"checked","click"],["class","col-lg-3 fv-row fv-plugins-icon-container",4,"ngIf"],[1,"col-4"],[1,"col-12","my-2"],["type","radio","name","type_cupone","value","1",1,"form-check-input",3,"checked","click"],["type","radio","name","type_cupone","value","2",1,"form-check-input",3,"checked","click"],["type","radio","name","type_cupone","value","3",1,"form-check-input",3,"checked","click"],[1,"row","align-items-start"],["class","col-12",4,"ngIf"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["type","number","name","num_use","placeholder","Por ejemplo:   20",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"col-10"],["name","product_id","placeholder","Selec. Producto",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"col-2"],[1,"btn","btn-sm","btn-success",3,"click"],[3,"value"],["name","categorie_id","placeholder","Selec. Departamento",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["name","brand_id","placeholder","Selec. Marcas",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive","w-100"],["id","kt_advance_table_widget_1",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-left"],["width","60","alt","",3,"src"],[1,"ml-5","btn","btn-sm","btn-danger",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.YNc(1,$,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Codigo del cupon: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(r){return n.code=r}),e.qZA()(),e.TgZ(9,"div",7)(10,"label",5),e._uU(11,"Gesti\xf3n de descuento: (*)"),e.qZA(),e.TgZ(12,"div",8)(13,"div",9)(14,"label",10)(15,"span",11)(16,"input",12),e.NdJ("click",function(){return n.changeTypeDiscount(1)}),e.qZA()(),e.TgZ(17,"span",13)(18,"span",14),e._uU(19,"Porcentaje"),e.qZA()()()(),e.TgZ(20,"div",9)(21,"label",10)(22,"span",11)(23,"input",15),e.NdJ("click",function(){return n.changeTypeDiscount(2)}),e.qZA()(),e.TgZ(24,"span",13)(25,"span",14),e._uU(26,"Monto fijo"),e.qZA()()()()()(),e.TgZ(27,"div",16)(28,"label",5),e._uU(29,"Descuento: (*)"),e.qZA(),e.TgZ(30,"input",17),e.NdJ("ngModelChange",function(r){return n.discount=r}),e.qZA()()(),e.TgZ(31,"div",3)(32,"div",18)(33,"label",5),e._uU(34,"Status:( *)"),e.qZA(),e.TgZ(35,"select",19),e.NdJ("ngModelChange",function(r){return n.state=r}),e.TgZ(36,"option",20),e._uU(37,"Activo"),e.qZA(),e.TgZ(38,"option",21),e._uU(39,"Inactivo"),e.qZA()()(),e.TgZ(40,"div",7)(41,"label",5),e._uU(42,"Gesti\xf3n de uso: (*)"),e.qZA(),e.TgZ(43,"div",8)(44,"div",9)(45,"label",10)(46,"span",11)(47,"input",22),e.NdJ("click",function(){return n.changeTypeCount(1)}),e.qZA()(),e.TgZ(48,"span",13)(49,"span",14),e._uU(50,"Ilimitado"),e.qZA()()()(),e.TgZ(51,"div",9)(52,"label",10)(53,"span",11)(54,"input",23),e.NdJ("click",function(){return n.changeTypeCount(2)}),e.qZA()(),e.TgZ(55,"span",13)(56,"span",14),e._uU(57,"Limitado"),e.qZA()()()()()(),e.YNc(58,K,4,1,"div",24),e.qZA(),e.TgZ(59,"div",3)(60,"div",25)(61,"div",8)(62,"div",26)(63,"label",10)(64,"span",11)(65,"input",27),e.NdJ("click",function(){return n.changeTypeCupone(1)}),e.qZA()(),e.TgZ(66,"span",13)(67,"span",14),e._uU(68,"Productos"),e.qZA()()()(),e.TgZ(69,"div",26)(70,"label",10)(71,"span",11)(72,"input",28),e.NdJ("click",function(){return n.changeTypeCupone(2)}),e.qZA()(),e.TgZ(73,"span",13)(74,"span",14),e._uU(75,"Categorias"),e.qZA()()()(),e.TgZ(76,"div",26)(77,"label",10)(78,"span",11)(79,"input",29),e.NdJ("click",function(){return n.changeTypeCupone(3)}),e.qZA()(),e.TgZ(80,"span",13)(81,"span",14),e._uU(82,"Marcas"),e.qZA()()()()()(),e.TgZ(83,"div",25)(84,"div",30),e.YNc(85,j,12,2,"div",31),e.YNc(86,H,12,2,"div",31),e.YNc(87,W,12,2,"div",31),e.qZA()(),e.TgZ(88,"div",25)(89,"div",8),e.YNc(90,te,14,1,"div",31),e.YNc(91,oe,14,1,"div",31),e.YNc(92,ae,12,1,"div",31),e.qZA()()(),e.TgZ(93,"div",3)(94,"div",32)(95,"button",33),e.NdJ("click",function(){return n.save()}),e._uU(96,"Guardar"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,25,n.isLoading$)),e.xp6(7),e.Q6J("ngModel",n.code),e.xp6(6),e.Q6J("ngClass",e.VKq(27,_,1==n.type_discount)),e.xp6(2),e.Q6J("checked",1==n.type_discount),e.xp6(5),e.Q6J("ngClass",e.VKq(29,_,2==n.type_discount)),e.xp6(2),e.Q6J("checked",2==n.type_discount),e.xp6(7),e.Q6J("ngModel",n.discount),e.xp6(5),e.Q6J("ngModel",n.state),e.xp6(10),e.Q6J("ngClass",e.VKq(31,_,1==n.type_count)),e.xp6(2),e.Q6J("checked",1==n.type_count),e.xp6(5),e.Q6J("ngClass",e.VKq(33,_,2==n.type_count)),e.xp6(2),e.Q6J("checked",2==n.type_count),e.xp6(4),e.Q6J("ngIf",2==n.type_count),e.xp6(5),e.Q6J("ngClass",e.VKq(35,_,1==n.type_cupone)),e.xp6(2),e.Q6J("checked",1==n.type_cupone),e.xp6(5),e.Q6J("ngClass",e.VKq(37,_,2==n.type_cupone)),e.xp6(2),e.Q6J("checked",2==n.type_cupone),e.xp6(5),e.Q6J("ngClass",e.VKq(39,_,3==n.type_cupone)),e.xp6(2),e.Q6J("checked",3==n.type_cupone),e.xp6(6),e.Q6J("ngIf",1==n.type_cupone),e.xp6(1),e.Q6J("ngIf",2==n.type_cupone),e.xp6(1),e.Q6J("ngIf",3==n.type_cupone),e.xp6(3),e.Q6J("ngIf",1==n.type_cupone),e.xp6(1),e.Q6J("ngIf",2==n.type_cupone),e.xp6(1),e.Q6J("ngIf",3==n.type_cupone))},dependencies:[p.mk,p.sg,p.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On,p.Ov]})}return o})()}]}];let re=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[C.Bz.forChild(se),C.Bz]})}return o})();var ce=d(53);let de=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[p.ez,re,l.JF,c.u5,h.IJ,c.UX,ce.vi,h.bz,h.jF]})}return o})()}}]);