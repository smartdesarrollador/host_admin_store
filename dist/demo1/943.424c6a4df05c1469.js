"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[943],{943:(k,p,r)=>{r.r(p),r.d(p,{SalesModule:()=>U});var c=r(6814),_=r(7304),e=r(5879);let h=(()=>{class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=e.Xpm({type:a,selectors:[["app-sales"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},dependencies:[_.lC]})}return a})();var m=r(6988),u=r(8743),f=r(2425),d=r(6223),g=r(1274);function Z(a,l){1&a&&e._UZ(0,"span",47)}function T(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"option",48),e._uU(2),e.qZA(),e.BQk()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function b(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"option",48),e._uU(2),e.qZA(),e.BQk()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function C(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"option",48),e._uU(2),e.qZA(),e.BQk()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function S(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"option",48),e._uU(2),e.qZA(),e.BQk()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function v(a,l){if(1&a&&(e.TgZ(0,"div",58),e._UZ(1,"img",59),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.user.avatar,e.LSH)}}function A(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"tr",49)(2,"td")(3,"div",50),e.YNc(4,v,2,1,"div",51),e.TgZ(5,"div",52)(6,"a",53),e._uU(7),e.qZA(),e.TgZ(8,"span",54),e._uU(9),e.qZA()()()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span"),e._uU(15),e.qZA()(),e.TgZ(16,"td")(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"span"),e._uU(21),e.qZA()(),e.TgZ(22,"td")(23,"span"),e._uU(24),e.qZA()(),e.TgZ(25,"td")(26,"span"),e._uU(27),e.qZA()(),e.TgZ(28,"td",55)(29,"a",56)(30,"i",57),e._UZ(31,"span",9)(32,"span",10),e.qZA()()()(),e.BQk()),2&a){const t=l.$implicit,o=e.oxw();e.xp6(4),e.Q6J("ngIf",t.user.avatar),e.xp6(3),e.Oqu(t.user.full_name),e.xp6(2),e.Oqu(t.user.phone),e.xp6(3),e.hij(" ",t.method_payment," "),e.xp6(3),e.hij(" ",t.currency_total," "),e.xp6(3),e.AsE(" ",t.total," ",t.currency_payment," "),e.xp6(3),e.hij(" ",t.n_transaccion," "),e.xp6(3),e.hij(" ",t.created_at," "),e.xp6(3),e.lnq(" ",t.sale_address.country_region," / ",t.sale_address.city," / ",t.sale_address.company," "),e.xp6(2),e.Q6J("href",o.URL_SERVICIOST+"/sales/report-pdf/"+t.id,e.LSH)}}const y=[{path:"",component:h,children:[{path:"list",component:(()=>{class a{salesService;toastr;sales=[];search="";totalPages=0;currentPage=1;isLoading$;marcas=[];marca_id="";categorie_first_id="";categorie_second_id="";categorie_third_id="";categories_first=[];categories_seconds=[];categories_seconds_backups=[];categories_thirds=[];categories_thirds_backups=[];start_date;end_date;method_payment;URL_SERVICIOST=m.$g;constructor(t,o){this.salesService=t,this.toastr=o}ngOnInit(){this.listSales(),this.isLoading$=this.salesService.isLoading$,this.configAll()}configAll(){this.salesService.configAll().subscribe(t=>{console.log(t),this.marcas=t.brands,this.categories_first=t.categories_first,this.categories_seconds=t.categories_seconds,this.categories_thirds=t.categories_thirds})}listSales(t=1){this.salesService.listSales(t,{search:this.search,brand_id:this.marca_id,categorie_first_id:this.categorie_first_id,categorie_second_id:this.categorie_second_id,categorie_third_id:this.categorie_third_id,start_date:this.start_date,end_date:this.end_date,method_payment:this.method_payment}).subscribe(n=>{console.log(n),this.sales=n.sales.data,this.totalPages=n.total,this.currentPage=t},n=>{console.log(n),this.toastr.error("API RESPONSE - COMUNIQUESE CON EL DESARROLLADOR",n.error.message)})}reset(){this.search="",this.marca_id="",this.categorie_first_id="",this.categorie_second_id="",this.categorie_third_id="",this.start_date=null,this.end_date=null,this.method_payment="",this.listSales()}export_sale_download(){let t="";this.search&&(t+="&search="+this.search),this.marca_id&&(t+="&brand_id="+this.marca_id),this.categorie_first_id&&(t+="&categorie_first_id="+this.categorie_first_id),this.categorie_second_id&&(t+="&categorie_second_id="+this.categorie_second_id),this.categorie_third_id&&(t+="&categorie_third_id="+this.categorie_third_id),this.start_date&&(t+="&start_date="+this.start_date),this.end_date&&(t+="&end_date="+this.end_date),this.method_payment&&(t+="&method_payment="+this.method_payment),window.open(m.$g+"/sales/list-excel?k=1"+t,"_blank")}changeDepartamento(){this.categories_seconds_backups=this.categories_seconds.filter(t=>t.categorie_second_id==this.categorie_first_id)}changeCategorie(){this.categories_thirds_backups=this.categories_thirds.filter(t=>t.categorie_second_id==this.categorie_second_id)}searchTo(){this.listSales()}loadPage(t){console.log(t),this.listSales(t)}static \u0275fac=function(o){return new(o||a)(e.Y36(u.M),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:a,selectors:[["app-sales-list"]],decls:94,vars:21,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-header","border-0","pt-6",2,"display","inline !important"],[1,"row"],[1,"col-2"],[1,"col-12"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","data-kt-user-table-filter","search","placeholder","Search Orders",1,"form-control","form-control-solid","w-250px","ps-13",3,"ngModel","keyup.enter","ngModelChange"],["name","marca","placeholder","Selec. Marca",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"col-6"],[1,"col-4"],["name","departament","placeholder","Selec. Departamento",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange","change"],["name","categorie","placeholder","Selec. Categoria",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange","change"],["name","categorie","placeholder","Selec. Categoria",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[1,"col-4","my-3"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["name","method_payment","placeholder","Selec. Metodo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","PAYPAL"],["value","MERCADOPAGO"],[1,"col-3"],[1,"card-toolbar"],["data-kt-user-table-toolbar","base",1,"d-flex","justify-content-end"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"ki-duotone","ki-magnifier","fs-2"],[1,"btn","btn-dark","mx-2",3,"click"],[1,"ki-duotone","ki-disk","fs-2"],[1,"btn","btn-success","mx-2",3,"click"],[1,"ki-duotone","ki-folder-down","fs-2"],[1,"card-body","py-4"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive"],["id","kt_table_users",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","275.844px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Joined Date: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","214.609px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Last login: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-100px","sorting_disabled",2,"width","129.75px"],[1,"text-gray-600","fw-semibold"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"odd"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px me-5",4,"ngIf"],[1,"d-flex","justify-content-start","flex-column"],["href","#",1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],[1,"text-muted","fw-semibold","text-muted","d-block","fs-7"],[1,"text-end"],["target","_blank",1,"btn","btn-icon","btn-bg-danger","btn-active-color-danger","btn-sm","me-1",3,"href"],[1,"ki-duotone","ki-some-files","fs-2"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Z,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"div",6)(9,"div",7)(10,"i",8),e._UZ(11,"span",9)(12,"span",10),e.qZA(),e.TgZ(13,"input",11),e.NdJ("keyup.enter",function(){return n.searchTo()})("ngModelChange",function(i){return n.search=i}),e.qZA()()()(),e.TgZ(14,"div",5)(15,"select",12),e.NdJ("ngModelChange",function(i){return n.marca_id=i}),e.TgZ(16,"option",13),e._uU(17,"Selec. Marcas"),e.qZA(),e.YNc(18,T,3,2,"ng-container",14),e.qZA()()()(),e.TgZ(19,"div",15)(20,"div",3)(21,"div",16)(22,"select",17),e.NdJ("ngModelChange",function(i){return n.categorie_first_id=i})("change",function(){return n.changeDepartamento()}),e.TgZ(23,"option",13),e._uU(24,"Selec. Departamento"),e.qZA(),e.YNc(25,b,3,2,"ng-container",14),e.qZA()(),e.TgZ(26,"div",16)(27,"select",18),e.NdJ("ngModelChange",function(i){return n.categorie_second_id=i})("change",function(){return n.changeCategorie()}),e.TgZ(28,"option",13),e._uU(29,"Selec. Categoria"),e.qZA(),e.YNc(30,C,3,2,"ng-container",14),e.qZA()(),e.TgZ(31,"div",16)(32,"select",19),e.NdJ("ngModelChange",function(i){return n.categorie_third_id=i}),e.TgZ(33,"option",13),e._uU(34,"Selec. Subcategoria"),e.qZA(),e.YNc(35,S,3,2,"ng-container",14),e.qZA()(),e.TgZ(36,"div",20)(37,"div",21)(38,"input",22),e.NdJ("ngModelChange",function(i){return n.start_date=i}),e.qZA()(),e.TgZ(39,"small"),e._uU(40,"Fecha de inicio"),e.qZA()(),e.TgZ(41,"div",20)(42,"div",21)(43,"input",22),e.NdJ("ngModelChange",function(i){return n.end_date=i}),e.qZA()(),e.TgZ(44,"small"),e._uU(45,"Fecha de fin"),e.qZA()(),e.TgZ(46,"div",16)(47,"select",23),e.NdJ("ngModelChange",function(i){return n.method_payment=i}),e.TgZ(48,"option",13),e._uU(49,"Selec. Metdo"),e.qZA(),e.TgZ(50,"option",24),e._uU(51,"PAYPAL"),e.qZA(),e.TgZ(52,"option",25),e._uU(53,"MERCADOPAGO"),e.qZA()()()()(),e.TgZ(54,"div",26)(55,"div",27)(56,"div",28)(57,"a",29),e.NdJ("click",function(){return n.searchTo()}),e.TgZ(58,"i",30),e._UZ(59,"span",9)(60,"span",10),e.qZA()(),e.TgZ(61,"a",31),e.NdJ("click",function(){return n.reset()}),e.TgZ(62,"i",32),e._UZ(63,"span",9)(64,"span",10),e.qZA()(),e.TgZ(65,"a",33),e.NdJ("click",function(){return n.export_sale_download()}),e.TgZ(66,"i",34),e._UZ(67,"span",9)(68,"span",10),e.qZA()()()()()()(),e.TgZ(69,"div",35)(70,"div",36)(71,"div",37)(72,"table",38)(73,"thead")(74,"tr",39)(75,"th",40),e._uU(76," Cliente "),e.qZA(),e.TgZ(77,"th",41),e._uU(78," Metodo de pago "),e.qZA(),e.TgZ(79,"th",42),e._uU(80," Tipo de Moneda Total "),e.qZA(),e.TgZ(81,"th",42),e._uU(82," Total "),e.qZA(),e.TgZ(83,"th",42),e._uU(84," N\xb0 de Transaccion "),e.qZA(),e.TgZ(85,"th",42),e._uU(86," Fecha de registro "),e.qZA(),e.TgZ(87,"th",43),e._uU(88," Region/Ciudad/Pais "),e.qZA(),e.TgZ(89,"th",44),e._uU(90,"Actions"),e.qZA()()(),e.TgZ(91,"tbody",45),e.YNc(92,A,33,13,"ng-container",14),e.qZA()(),e.TgZ(93,"ngb-pagination",46),e.NdJ("pageChange",function(i){return n.currentPage=i})("pageChange",function(i){return n.loadPage(i)}),e.qZA()()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,19,n.isLoading$)),e.xp6(12),e.Q6J("ngModel",n.search),e.xp6(2),e.Q6J("ngModel",n.marca_id),e.xp6(3),e.Q6J("ngForOf",n.marcas),e.xp6(4),e.Q6J("ngModel",n.categorie_first_id),e.xp6(3),e.Q6J("ngForOf",n.categories_first),e.xp6(2),e.Q6J("ngModel",n.categorie_second_id),e.xp6(3),e.Q6J("ngForOf",n.categories_seconds_backups),e.xp6(2),e.Q6J("ngModel",n.categorie_third_id),e.xp6(3),e.Q6J("ngForOf",n.categories_thirds_backups),e.xp6(3),e.Q6J("ngModel",n.start_date),e.xp6(5),e.Q6J("ngModel",n.end_date),e.xp6(4),e.Q6J("ngModel",n.method_payment),e.xp6(45),e.Q6J("ngForOf",n.sales),e.xp6(1),e.Q6J("collectionSize",n.totalPages)("page",n.currentPage)("pageSize",25)("rotate",!0)("boundaryLinks",!0))},dependencies:[c.sg,c.O5,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On,g.N9,c.Ov]})}return a})()}]}];let x=(()=>{class a{static \u0275fac=function(o){return new(o||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({imports:[_.Bz.forChild(y),_.Bz]})}return a})();var M=r(9862),L=r(53);let U=(()=>{class a{static \u0275fac=function(o){return new(o||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({imports:[c.ez,x,M.JF,d.u5,g.IJ,d.UX,L.vi,g.bz,g.jF]})}return a})()}}]);